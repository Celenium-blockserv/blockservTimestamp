{"version":3,"sources":["contexts/EthContext/EthContext.js","contexts/EthContext/state.js","contexts/EthContext/EthProvider.jsx","contexts/EthContext/useEth.js","components/Footer.jsx","components/TransactionRecorder/Title.jsx","components/TransactionRecorder/NoticeNoArtifact.jsx","components/TransactionRecorder/NoticeWrongNetwork.jsx","components/TransactionRecorder/index.jsx","components/TransactionReader/Title.jsx","components/TransactionReader/NoticeNoArtifact.jsx","components/TransactionReader/NoticeWrongNetwork.jsx","components/TransactionReader/index.jsx","App.jsx","index.js"],"names":["EthContext","createContext","actions","initialState","artifact","web3","accounts","networkID","contract","reducer","state","action","type","data","Error","EthProvider","children","useReducer","dispatch","init","useCallback","Web3","givenProvider","eth","requestAccounts","net","getId","abi","address","networks","Contract","err","console","error","useEffect","tryInit","require","events","handleChange","forEach","e","window","ethereum","on","removeListener","Provider","value","useEth","useContext","Link","uri","text","href","target","rel","Footer","Title","NoticeNoArtifact","className","NoticeWrongNetwork","styles","StyleSheet","create","input","height","margin","borderWidth","padding","dropzone","border","width","TransactionRecorder","useState","hash","setHash","recipient","setRecipient","setTimestamp","methods","timestamp","send","from","demo","Text","TextInput","style","onChangeText","onClick","TransactionReader","proofs","setProofs","getProofOfOwnership","call","result","log","map","proof","Date","toLocaleString","blockNumber","App","id","ReactDOM","createRoot","document","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.76ea5f8e.chunk.js","sourcesContent":["import { createContext } from \"react\";\n\nconst EthContext = createContext();\n\nexport default EthContext;\n","const actions = {\n  init: \"INIT\",\n};\n\nconst initialState = {\n  artifact: null,\n  web3: null,\n  accounts: null,\n  networkID: null,\n  contract: null\n};\n\nconst reducer = (state, action) => {\n  const { type, data } = action;\n  switch (type) {\n    case actions.init:\n      return { ...state, ...data };\n    default:\n      throw new Error(\"Undefined reducer action type\");\n  }\n};\n\nexport {\n  actions,\n  initialState,\n  reducer\n};\n","import React, { useReducer, useCallback, useEffect } from \"react\";\nimport Web3 from \"web3\";\nimport EthContext from \"./EthContext\";\nimport { reducer, actions, initialState } from \"./state\";\n\nfunction EthProvider({ children }) {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  const init = useCallback(\n    async artifact => {\n      if (artifact) {\n        const web3 = new Web3(Web3.givenProvider || \"ws://localhost:8545\");\n        const accounts = await web3.eth.requestAccounts();\n        const networkID = await web3.eth.net.getId();\n        const { abi } = artifact;\n        let address, contract;\n        try {\n          address = artifact.networks[networkID].address;\n          contract = new web3.eth.Contract(abi, address);\n        } catch (err) {\n          console.error(err);\n        }\n        dispatch({\n          type: actions.init,\n          data: { artifact, web3, accounts, networkID, contract }\n        });\n      }\n    }, []);\n\n  useEffect(() => {\n    const tryInit = async () => {\n      try {\n        const artifact = require(\"../../contracts/Timestamper.json\");\n        init(artifact);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n\n    tryInit();\n  }, [init]);\n\n  useEffect(() => {\n    const events = [\"chainChanged\", \"accountsChanged\"];\n    const handleChange = () => {\n      init(state.artifact);\n    };\n\n    events.forEach(e => window.ethereum.on(e, handleChange));\n    return () => {\n      events.forEach(e => window.ethereum.removeListener(e, handleChange));\n    };\n  }, [init, state.artifact]);\n\n  return (\n    <EthContext.Provider value={{\n      state,\n      dispatch\n    }}>\n      {children}\n    </EthContext.Provider>\n  );\n}\n\nexport default EthProvider;\n","import { useContext } from \"react\";\nimport EthContext from \"./EthContext\";\n\nconst useEth = () => useContext(EthContext);\n\nexport default useEth;\n","function Link({ uri, text }) {\n  return <a href={uri} target=\"_blank\" rel=\"noreferrer\">{text}</a>;\n}\n\nfunction Footer() {\n  return (\n    <footer>\n      <h2>More resources</h2>\n      <Link uri={\"https://trufflesuite.com\"} text={\"Truffle\"} />\n      <Link uri={\"https://reactjs.org\"} text={\"React\"} />\n      <Link uri={\"https://soliditylang.org\"} text={\"Solidity\"} />\n      <Link uri={\"https://ethereum.org\"} text={\"Ethereum\"} />\n    </footer >\n  );\n}\n\nexport default Footer;\n","function Title() {\n  return <h2>Transaction Recorder</h2>;\n}\n\nexport default Title;\n","function NoticeNoArtifact() {\n  return (\n    <p>\n      ⚠️ Cannot find <span className=\"code\">Nfts</span> contract artifact.\n      Please complete the above preparation first, then restart the react dev server.\n    </p>\n  );\n}\n\nexport default NoticeNoArtifact;\n","function NoticeWrongNetwork() {\n  return (\n    <p>\n      ⚠️ MetaMask is not connected to the same network as the one you deployed to.\n    </p>\n  );\n}\n\nexport default NoticeWrongNetwork;\n","import {useEffect, useState} from \"react\";\nimport {StyleSheet} from 'react-native';\n\nimport useEth from \"../../contexts/EthContext/useEth\";\nimport {  Text, TextInput } from 'react-native';\nimport Title from \"./Title\";\n\nimport NoticeNoArtifact from \"./NoticeNoArtifact\";\nimport NoticeWrongNetwork from \"./NoticeWrongNetwork\";\n\n\nconst styles = StyleSheet.create({\n    input: {\n        height: 40,\n        margin: 12,\n        borderWidth: 1,\n        padding: 10,\n    },\n    dropzone: {\n        padding: 20,\n        border: \"3px blue dashed\",\n        width: '60%',\n        margin: 'auto'\n    }\n});\n\nfunction TransactionRecorder() {\n    const { state: { artifact,   accounts, contract } } = useEth();\n\n    const [hash, setHash] = useState(0);\n    const [recipient, setRecipient] = useState(\"\");\n\n    useEffect(() => {\n        if (accounts) {\n            setRecipient(accounts[0])\n\n        }\n    }, [accounts]);\n\n\n    const setTimestamp = async () => {\n\n        await contract.methods.timestamp(recipient, hash,).send( { from: accounts[0] });\n\n    };\n\n    const demo =\n    <>\n        <Title></Title>\n\n        <Text>Hash  = </Text>\n        <TextInput\n            style={styles.input}\n            onChangeText={setHash}\n            value={hash}\n        />\n        <Text>Ownership address  = </Text>\n        <TextInput\n            style={styles.input}\n            onChangeText={setRecipient}\n            value={recipient}\n        />\n        <button onClick={setTimestamp}>\n            Record transaction\n        </button>\n\n\n\n    </>;\n\n  return (\n    <div className=\"demo\">\n      {\n        !artifact ? <NoticeNoArtifact /> :\n          !contract ? <NoticeWrongNetwork /> :\n            demo\n      }\n    </div>\n  );\n}\n\nexport default TransactionRecorder;\n","function Title() {\n  return <h2>Transaction Reader</h2>;\n}\n\nexport default Title;\n","function NoticeNoArtifact() {\n  return (\n    <p>\n      ⚠️ Cannot find <span className=\"code\">Nfts</span> contract artifact.\n      Please complete the above preparation first, then restart the react dev server.\n    </p>\n  );\n}\n\nexport default NoticeNoArtifact;\n","function NoticeWrongNetwork() {\n  return (\n    <p>\n      ⚠️ MetaMask is not connected to the same network as the one you deployed to.\n    </p>\n  );\n}\n\nexport default NoticeWrongNetwork;\n","import {useEffect, useState} from \"react\";\nimport {StyleSheet} from 'react-native';\n\nimport useEth from \"../../contexts/EthContext/useEth\";\nimport {  Text, TextInput } from 'react-native';\nimport Title from \"./Title\";\n\nimport NoticeNoArtifact from \"./NoticeNoArtifact\";\nimport NoticeWrongNetwork from \"./NoticeWrongNetwork\";\n\n\nconst styles = StyleSheet.create({\n    input: {\n        height: 40,\n        margin: 12,\n        borderWidth: 1,\n        padding: 10,\n    },\n    dropzone: {\n        padding: 20,\n        border: \"3px blue dashed\",\n        width: '60%',\n        margin: 'auto'\n    }\n});\n\nfunction TransactionReader() {\n    const { state: { artifact,   accounts, contract } } = useEth();\n\n    const [recipient, setRecipient] = useState(\"\");\n    const [proofs, setProofs] = useState([]);\n\n    useEffect(() => {\n        if (accounts) {\n            setRecipient(accounts[0])\n\n        }\n    }, [accounts]);\n\n\n    const setTimestamp = async () => {\n\n        let result = await contract.methods.getProofOfOwnership(recipient).call()\n        console.log(result);\n        setProofs(result);\n    };\n\n    const demo =\n    <>\n        <Title></Title>\n\n        <Text>Ownership address  = </Text>\n        <TextInput\n            style={styles.input}\n            onChangeText={setRecipient}\n            value={recipient}\n        />\n        <button onClick={setTimestamp}>\n            Get proof of owner ship\n        </button>\n\n        {\n            proofs.map((proof) => (\n                <li key={proof.hash}>\n                    {new Date(proof.timestamp * 1000).toLocaleString()} - {proof.hash} - {proof.blockNumber}\n                </li>\n            ))\n        }\n\n\n    </>;\n\n  return (\n    <div className=\"demo\">\n      {\n        !artifact ? <NoticeNoArtifact /> :\n          !contract ? <NoticeWrongNetwork /> :\n            demo\n      }\n    </div>\n  );\n}\n\nexport default TransactionReader;\n","import { EthProvider } from \"./contexts/EthContext\";\nimport Footer from \"./components/Footer\";\nimport \"./App.css\";\nimport TransactionRecorder from \"./components/TransactionRecorder\";\nimport TransactionReader from \"./components/TransactionReader\";\n\nfunction App() {\n  return (\n    <EthProvider>\n      <div id=\"App\" >\n        <div className=\"container\">\n          <h1>Timestamper</h1>\n          <hr />\n          <TransactionRecorder />\n          <hr />\n          <TransactionReader />\n          <hr />\n          <Footer />\n        </div>\n      </div>\n    </EthProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n"],"sourceRoot":""}